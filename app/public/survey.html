<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/reset.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/style.css"/>
    <link rel="shortcut icon" type="image/png" href="assets/images/paw.png"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>

    <title>Friend Finder - Survey</title>

    <style>
     .jumbotron{
          background-image: url('#');
          background-position: center;
          background-size: cover;
          background-repeat: no-repeat;
          height: 300px;
          text-align: center;
         }

      * {
         font-family: 'Quicksand', sans-serif;
        }
    </style>
    
</head>

<section>
<div class="jumbotron jumbotron-fluid">
    <section>
      <h1 class="display-4"><i class="fas fa-paw"></i>  Best Friend Finder  <i class="fas fa-paw"></i></h1>
      <p class="lead">Take the survey to find your next best friend!</p></br>
      <a class="btn btn-primary btn-lg" href="home.html" role="button">Home</a>
    </section>
</div>

<div class="container">
<form id="myForm">
  <div class="form-row">
      <div class="form-group col-md-6">
        <label for="inputEmail4">Name</label>
        <input type="text" class="form-control" id="name" placeholder="Required">
      </div>
      <div class="form-group col-md-6">
        <label for="inputPassword4">Profile Image URL</label>
        <input type="text" class="form-control" id="photoURL" placeholder=".jpg Required">
      </div>
    </div>

    <div>
      <p>1 - Disagree, 2 - Slightly Agree,  3 - Neutral,  4 - Somewhat Agree,  5 - Strongly Agree</p>
    </div>

    <div class="form-group">
      <label for="exampleFormControlSelect1"></label>1. You find it difficult to introduce yourself to other people.</label>
      <select class="form-control" id="Q1">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>

  <div class="form-group">
      <label for="exampleFormControlSelect1">2. You find it easy to stay relaxed even when there is some pressure.</label>
      <select class="form-control" id="Q2">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>

  <div class="form-group">
      <label for="exampleFormControlSelect1">3. You do not usually initiate conversations.</label>
      <select class="form-control" id="Q3">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>

  <div class="form-group">
      <label for="exampleFormControlSelect1">4. Being organized is more important to you than being adaptable.</label>
      <select class="form-control" id="Q4">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>

  <div class="form-group">
      <label for="exampleFormControlSelect1">5. You are usually highly motivated and energetic.</label>
      <select class="form-control" id="Q5">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>

  <div class="form-group">
      <label for="exampleFormControlSelect1">6. You do not mind being at the center of attention.</label>
      <select class="form-control" id="Q6">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>

  <div class="form-group">
      <label for="exampleFormControlSelect1">7. You would rather improvise than spend time coming up with a detailed plan.</label>
      <select class="form-control" id="Q7">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>
    
  <div class="form-group">
      <label for="exampleFormControlSelect1">8. In a discussion, truth should be more important than peopleâ€™s sensitivities.</label>
      <select class="form-control" id="Q8">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>

  <div class="form-group">
      <label for="exampleFormControlSelect1">9. An interesting book or a video game is often better than a social event.</label>
      <select class="form-control" id="Q9">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>
      
  <div class="form-group">
      <label for="exampleFormControlSelect1">10. You are more of a natural improviser than a careful planner.</label>
      <select class="form-control" id="Q10">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>
  
  <button type="submit" class="btn btn-primary" id="surveySubmit">Submit Survey</button>
</form>
</div>

</div>
</br>
<footer class="footer">
  <div class="container">
    <p><a href="/api/friends">API Friends List</a> | <i class="fab fa-github"></i>  <a href="https://github.com/lindnerdesign/Friend-Finder">GitHub Repo</a></p>
  </div>
</footer>
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">Best Friend Results</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <h4>Meet your Match!</h4>
          <h5 id="matchName"></h5>
          <img id="matchPhoto" src="" alt="No Image" width = 250px>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

<script type="text/javascript">
$(document).ready(function(){

  $("#myForm").submit(function(event){
    event.preventDefault();

     var newFriend = {
                name: $('#name').val().trim(),
                photo: $('#photoURL').val().trim(),
                scores: [
                    parseInt($('#Q1').val()),
                    parseInt($('#Q2').val()),
                    parseInt($('#Q3').val()),
                    parseInt($('#Q4').val()),
                    parseInt($('#Q5').val()),
                    parseInt($('#Q6').val()),
                    parseInt($('#Q7').val()),
                    parseInt($('#Q8').val()),
                    parseInt($('#Q9').val()),
                    parseInt($('#Q10').val()),
                ]
            };
           
            $.post("/api/friends", newFriend, function(data) {
              // console.log(data);
          

            // .then(function(data){
            $('#myModal').modal("toggle")
            $('#myModal').on('shown.bs.modal', function () {
              $('#myForm').trigger('focus')
              $("#matchName").text(data.name);
              $("#matchPhoto").attr("src", data.photo);
            })

            //clear form after submission
            $('#name').val("");
            $('#photoURL').val("");
            $('#Q1').val("");
            $('#Q2').val("");
            $('#Q3').val("");
            $('#Q4').val("");
            $('#Q5').val("");
            $('#Q6').val("");
            $('#Q7').val("");
            $('#Q8').val("");
            $('#Q9').val("");
            $('#Q10').val("");


            });
  });
});

</script>
</body>
</html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>